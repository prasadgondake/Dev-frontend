{"ast":null,"code":"import _regeneratorRuntime from\"F:/Projects/DevConnector/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"F:/Projects/DevConnector/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from'axios';import{setAlert}from'./alert';import{REGISTER_SUCCESS,REGISTER_FAIL,USER_LOADED,AUTH_ERROR,LOGIN_SUCCESS,LOGIN_FAIL,LOGOUT,CLEAR_PROFILE}from'./types';import setAuthToken from'../utils/setAuthToken';//Load User\nexport var loadUser=function loadUser(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(localStorage.token){setAuthToken(localStorage.token);}_context.prev=1;_context.next=4;return axios.get('/api/auth');case 4:res=_context.sent;dispatch({type:USER_LOADED,payload:res.data});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);dispatch({type:AUTH_ERROR});case 11:case\"end\":return _context.stop();}},_callee,null,[[1,8]]);}));return function(_x){return _ref.apply(this,arguments);};}();};//Register User\nexport var register=function register(_ref2){var name=_ref2.name,email=_ref2.email,password=_ref2.password;return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var config,body,res,errors;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:config={headers:{'Content-Type':'application/json'}};body=JSON.stringify({name:name,email:email,password:password});_context2.prev=2;_context2.next=5;return axios.post('/api/users',body,config);case 5:res=_context2.sent;dispatch({type:REGISTER_SUCCESS,payload:res.data});dispatch(loadUser());_context2.next=15;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](2);errors=_context2.t0.response.data.errors;if(errors){errors.forEach(function(error){return dispatch(setAlert(error.msg,'danger'));});}dispatch({type:REGISTER_FAIL});case 15:case\"end\":return _context2.stop();}},_callee2,null,[[2,10]]);}));return function(_x2){return _ref3.apply(this,arguments);};}();};// Login user\nexport var login=function login(email,password){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(dispatch){var config,body,res,errors;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:config={headers:{\"Content-Type\":\"application/json\"}};body=JSON.stringify({email:email,password:password});// console.log(body);\n_context3.prev=2;_context3.next=5;return axios.post('/api/auth',body,config);case 5:res=_context3.sent;dispatch({type:LOGIN_SUCCESS,payload:res.data});dispatch(loadUser());_context3.next=16;break;case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](2);errors=_context3.t0.response.data.errors;if(errors){errors.forEach(function(error){return dispatch(setAlert(error.msg,\"danger\"));});};dispatch({type:LOGIN_FAIL});case 16:case\"end\":return _context3.stop();}},_callee3,null,[[2,10]]);}));return function(_x3){return _ref4.apply(this,arguments);};}();};//Logout / Clear Profile\nexport var logout=function logout(){return function(dispatch){dispatch({type:CLEAR_PROFILE});dispatch({type:LOGOUT});};};","map":{"version":3,"names":["axios","setAlert","REGISTER_SUCCESS","REGISTER_FAIL","USER_LOADED","AUTH_ERROR","LOGIN_SUCCESS","LOGIN_FAIL","LOGOUT","CLEAR_PROFILE","setAuthToken","loadUser","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","dispatch","res","wrap","_callee$","_context","prev","next","localStorage","token","get","sent","type","payload","data","t0","stop","_x","apply","arguments","register","_ref2","name","email","password","_ref3","_callee2","config","body","errors","_callee2$","_context2","headers","JSON","stringify","post","response","forEach","error","msg","_x2","login","_ref4","_callee3","_callee3$","_context3","_x3","logout"],"sources":["F:/Projects/DevConnector/frontend/src/actions/auth.js"],"sourcesContent":["import axios from 'axios';\r\nimport { setAlert } from './alert';\r\nimport {\r\n    REGISTER_SUCCESS,\r\n    REGISTER_FAIL,\r\n    USER_LOADED,\r\n    AUTH_ERROR,\r\n    LOGIN_SUCCESS,\r\n    LOGIN_FAIL,\r\n    LOGOUT,\r\n    CLEAR_PROFILE\r\n} from './types';\r\n\r\nimport setAuthToken from '../utils/setAuthToken';\r\n\r\n//Load User\r\nexport const loadUser = () => async dispatch => {\r\n    if(localStorage.token){\r\n        setAuthToken(localStorage.token);\r\n    }\r\n    try {\r\n      const res=await axios.get('/api/auth');\r\n\r\n      dispatch({\r\n        type: USER_LOADED,\r\n        payload: res.data\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: AUTH_ERROR\r\n      });\r\n    }\r\n};\r\n\r\n//Register User\r\nexport const register = ({ name , email, password })=> async dispatch => {\r\n    const config  = {\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n        }\r\n    }\r\n\r\n    const body = JSON.stringify({ name , email , password});\r\n\r\n    try {\r\n      const res= await axios.post('/api/users' , body , config);\r\n\r\n      dispatch({\r\n        type: REGISTER_SUCCESS,\r\n        payload: res.data\r\n      });\r\n      dispatch(loadUser());\r\n    } catch (err) {\r\n      const errors=err.response.data.errors;\r\n\r\n      if(errors){\r\n        errors.forEach(error => dispatch(setAlert(error.msg, 'danger')));\r\n      }\r\n\r\n      dispatch({\r\n        type: REGISTER_FAIL\r\n      });\r\n    }\r\n};\r\n\r\n// Login user\r\nexport const login = (email, password) => async dispatch => {\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      }\r\n    };\r\n  \r\n    const body = JSON.stringify({ email, password });\r\n    // console.log(body);\r\n  \r\n    try {\r\n      const res = await axios.post('/api/auth', body, config);\r\n  \r\n      dispatch({\r\n        type: LOGIN_SUCCESS,\r\n        payload: res.data\r\n      });\r\n      dispatch(loadUser());\r\n    } catch (err) {\r\n      const errors = err.response.data.errors;\r\n  \r\n      if (errors) {\r\n        errors.forEach(error => dispatch(setAlert(error.msg, \"danger\")));\r\n      };\r\n  \r\n      dispatch({\r\n        type: LOGIN_FAIL\r\n      });\r\n    }\r\n  };\r\n\r\n  //Logout / Clear Profile\r\n  export const logout = () => dispatch => {\r\n    dispatch({ type: CLEAR_PROFILE });\r\n    dispatch({ type: LOGOUT });\r\n  };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}